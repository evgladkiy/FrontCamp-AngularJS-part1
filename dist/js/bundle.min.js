"use strict";function TodosService(o,t){var d=null,e=!1;function n(){return d||e?t.resolve(d):o.get("./initData/todos.json").then(function(o){return d=o.data})}return{getTodos:n,addTodo:function(o){var t,e,r=Object.assign(o,{creationDate:new Date,_id:String((t=0,e=1e7,Math.floor(Math.random()*(t-e+1))+e))});d?d.unshift(r):n.then(function(){return d.unshift(r)})},removeTodo:function(t){var o=d.findIndex(function(o){return o._id===t});d.splice(o,1)},updateTodo:function(t){var o=d.findIndex(function(o){return o._id===t._id});d.splice(o,1,t)}}}function AddTodoCtrl(t,e,r,o){t.newTodo={assignee:"",todoText:"",duration:""},t.shouldShowErrors=o.shouldShowErrors,t.addTodo=function(o){t.newTodoForm.$valid&&(r.addTodo(o),e.go("home"))}}function EditTodoCtrl(o,t,e,r,d){o.todoCopy=Object.assign({},d),o.shouldShowErrors=r.shouldShowErrors,o.updateTodo=function(){o.updateTodoForm.$valid&&(e.updateTodo(o.todoCopy),t.go("home"))}}function dateToPastDaysFilter(){return function(o){var t=Date.now()-new Date(o),e=Math.floor(t/864e5);return 0<e?e:.5}}function todosFilter(n){return function(o,t,r,d){return o.filter(function(o){switch(t){case"all":return o;case"done":return o.isDone;case"inProgress":return!o.isDone;default:return o}}).filter(function(o){var t=r.trim().toLowerCase(),e=void 0;return"todo"===d?e=o.todoText.toLowerCase():"date"===d&&(e=n("date")(o.creationDate,"dd.MM")),0===e.indexOf(t)})}}angular.module("app",["pasvaz.bindonce","ui.router","ngMessages"]),angular.module("app").directive("highlight",function(){return{restrict:"A",link:function(o,t,e){var r=e.highlight;if(""!==String(r))switch(r.toLowerCase()[0]){case"a":t.addClass("highlight_red");break;case"b":t.addClass("highlight_blue");break;default:return}}}}),angular.module("app").config(["$stateProvider",function(o){o.state("addTodo",{url:"/add-todo",templateUrl:"./pages/addTodo/templates/addTodo.html",controller:"AddTodoCtrl"})}]),angular.module("app").factory("InputErrorsService",function(){return{shouldShowErrors:function(o,t){return o.$dirty&&o.$touched||t}}}),angular.module("app").factory("TodosService",["$http","$q",TodosService]),angular.module("app").config(["$stateProvider",function(o){o.state("editTodo",{url:"/edit-todo/:id",templateUrl:"./pages/editTodo/templates/editTodo.html",controller:"EditTodoCtrl",resolve:{todo:function(t,o){return o.getTodos().then(function(o){return o.find(function(o){return o._id===t.id})})}},onEnter:function(o,t){void 0===t&&o.go("home")}})}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(o,t){o.state("home",{url:"/home",templateUrl:"./pages/home/templates/home.html",controller:"HomeCtrl",resolve:{todos:function(o){return o.getTodos()}}}),t.otherwise("/home")}]),angular.module("app").controller("AddTodoCtrl",["$scope","$state","TodosService","InputErrorsService",AddTodoCtrl]),angular.module("app").controller("EditTodoCtrl",["$scope","$state","TodosService","InputErrorsService","todo",EditTodoCtrl]),angular.module("app").controller("HomeCtrl",["$scope","todos",function(o,t){o.filterValue="",o.filterCategory="todo",o.doneFilter="all",o.todos=t}]),angular.module("app").filter("dateToPastDaysFilter",dateToPastDaysFilter),angular.module("app").filter("todosFilter",["$filter",todosFilter]),angular.module("app").directive("todo",["TodosService",function(o){return{restrict:"E",scope:{todo:"="},templateUrl:"./pages/home/directives/todo/todo.html"}}]),angular.module("app").controller("TodoCtrl",["$scope",function(o){}]),angular.module("app").directive("todoList",[function(){return{restrict:"E",scope:{doneFilter:"@",filterValue:"@",filterCategory:"@",todos:"="},templateUrl:"./pages/home/directives/todoList/todoList.html"}}]),angular.module("app").directive("todosToolbox",function(){return{restrict:"E",templateUrl:"./pages/home/directives/todosToolbox/todosToolbox.html"}});