"use strict";function TodosService(o,t){function e(){return r||n?t.resolve(r):o.get("./initData/todos.json").then(function(o){return r=o.data})}var r=null,n=!1;return{getTodos:e,addTodo:function(o){var t=Object.assign(o,{creationDate:new Date,_id:String(function(o,t){return Math.floor(Math.random()*(o-t+1))+t}(0,1e7))});r?r.unshift(t):e.then(function(){return r.unshift(t)})},removeTodo:function(o){var t=r.findIndex(function(t){return t._id===o});r.splice(t,1)},updateTodo:function(o){var t=r.findIndex(function(t){return t._id===o._id});r.splice(t,1,o)}}}function AddTodoCtrl(o,t,e,r){o.newTodo={assignee:"",todoText:"",duration:""},o.shouldShowErrors=r.shouldShowErrors,o.addTodo=function(r){o.newTodoForm.$valid&&(e.addTodo(r),t.go("home"))}}function EditTodoCtrl(o,t,e,r,n){o.todoCopy=Object.assign({},n),o.shouldShowErrors=r.shouldShowErrors,o.updateTodo=function(){o.updateTodoForm.$valid&&(e.updateTodo(o.todoCopy),t.go("home"))}}function contactsFilter(){return function(o,t){var e=t.trim().toLowerCase();return o.filter(function(o){return 0===o.name.toLowerCase().indexOf(e)})}}angular.module("app",["pasvaz.bindonce","ui.router","ngMessages"]),angular.module("app").directive("highlight",function(){return{restrict:"A",link:function(o,t,e){var r=e.highlight;if(""!==String(r))switch(r.toLowerCase()[0]){case"a":t.addClass("highlight_red");break;case"b":t.addClass("highlight_blue");break;default:return}}}}),angular.module("app").factory("InputErrorsService",function(){return{shouldShowErrors:function(o,t){return o.$dirty&&o.$touched||t}}}),angular.module("app").factory("TodosService",["$http","$q",TodosService]),angular.module("app").config(["$stateProvider",function(o){o.state("addTodo",{url:"/add-todo",templateUrl:"./pages/addTodo/templates/addTodo.html",controller:"AddTodoCtrl"})}]),angular.module("app").config(["$stateProvider",function(o){o.state("editTodo",{url:"/edit-todo/:id",templateUrl:"./pages/editTodo/templates/editTodo.html",controller:"EditTodoCtrl",resolve:{todo:function(o,t){return t.getTodos().then(function(t){return t.find(function(t){return t._id===o.id})})}},onEnter:function(o,t){void 0===t&&o.go("home")}})}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(o,t){o.state("home",{url:"/home",templateUrl:"./pages/home/templates/home.html",controller:"HomeCtrl",resolve:{todos:function(o){return o.getTodos()}}}),t.otherwise("/home")}]),angular.module("app").controller("AddTodoCtrl",["$scope","$state","TodosService","InputErrorsService",AddTodoCtrl]),angular.module("app").controller("EditTodoCtrl",["$scope","$state","TodosService","InputErrorsService","todo",EditTodoCtrl]),angular.module("app").controller("HomeCtrl",["$scope","todos",function(o,t){o.filterValue="",o.todos=t}]),angular.module("app").filter("contactsFilter",contactsFilter),angular.module("app").directive("todo",["TodosService",function(o){return{restrict:"E",scope:{todo:"="},controller:function(t){t.removeTodo=o.removeTodo},templateUrl:"./pages/home/directives/todo/todo.html"}}]),angular.module("app").directive("todoList",[function(){return{restrict:"E",scope:{filterValue:"@",todos:"="},templateUrl:"./pages/home/directives/todoList/todoList.html"}}]),angular.module("app").directive("todosTollbox",function(){return{restrict:"E",templateUrl:"./pages/home/directives/todosTollbox/todosTollbox.html"}});